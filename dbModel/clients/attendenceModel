const mongoose = require('mongoose');
const Schema = mongoose.Schema;

const attendenceModel = new Schema({
  companyId: { type: String, required: true },
  locationId: { type: String, required: true },
  userId: { type: String, required: true },
  deptId: { type: String, required: true },
  attendenceDetails: [{
    date: { type: String, required: true },
    shiftStart: { type: String, default: '' },
    shiftEnd: { type: String, default: '' },
    clockIn: { type: String, default: '' },
    clockOut: { type: String, default: '' },
    clockOutLog: [{ type: String }],
    isHoliday: { type: Schema.Types.ObjectId, default: null }
  }]
}, {
  timestamps: true
});

attendenceModel.index({ date: 1 });

module.exports = mongoose.model('attendences_data', attendenceModel);