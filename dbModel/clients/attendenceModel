const mongoose = require('mongoose');
const Schema = mongoose.Schema;

const attendenceSchema = async (dbconn) => {
  const attendenceModel = new Schema({
    deptId: { type: String, required: true },
    locationId: { type: String, required: true },
    userId: { type: String, required: true },
    date: { type: String, required: true },
    shiftStart: { type: String, default: '' },
    shiftEnd: { type: String, default: '' },
    userStatus: {
      type: String, enum: ['N/A', 'PRESENT', 'ABSENT', 'LATECHECKIN', 'ONLEAVE', 'ONTIME',
        'EARLYEXIT', 'LATEEXIT', 'WEEKOFF', 'WFH', 'HOLIDAY', 'OVERTIME', 'HALFDAY'], default: 'N/A'
    },
    isHoliday: { type: Schema.Types.ObjectId, default: null },
    attendenceStatus: { type: String, enum: ['N/A', 'CLOCKIN', 'CLOCKOUT'], default: 'N/A' },
    attendenceDetails: [{
      clockIn: { type: String, default: '' },
      clockOut: { type: String, default: '' },
      deviceNameClockIn: { type: String, default: '' },
      deviceNumberClockIn: { type: String, default: '' },
      deviceLocationClockIn: { type: String, default: '' },
      deviceNameClockOut: { type: String, default: '' },
      deviceNumberClockOut: { type: String, default: '' },
      deviceLocationClockOut: { type: String, default: '' },
    }]
  }, {
    timestamps: true
  });
  dbconn.model('attendences_data', attendenceModel);
};

module.exports = {
  attendenceSchema
};